<h2>Transactions</h2>

<mat-accordion>
  <mat-expansion-panel
    *ngFor="let tx of transactions | async"
    hideToggle="true">

    <mat-expansion-panel-header>
      <mat-panel-title>
        {{ tx.amount | currency }}
      </mat-panel-title>
      <mat-panel-description>
        {{ tx.timestamp | date }}
      </mat-panel-description>
    </mat-expansion-panel-header>

    <crm-edit-transaction #editTransaction [transaction]="tx">
    </crm-edit-transaction>
    <button
      *ngIf="editTransaction.form.dirty"
      [disabled]="!editTransaction.valid"
      (click)="updateTransaction(tx.id, editTransaction.value)"
      mat-raised-button
      color="primary">
      Save
    </button>

  </mat-expansion-panel>
</mat-accordion>

<p *ngIf="noTransactions | async">
  No transactions yet
</p>

<crm-edit-transaction
  #transaction>
</crm-edit-transaction>
